<div class="container-fluid">
  <h2><%= @post.author.email %> published:</h2>
  <% unless @post.content.empty? %>
    <p class="fs-5 card p-2"><%= @post.content %></p>
  <% end %>

  <% if @post.images.attached? %>
    <p class="fs-5 text-decoration-underline">Images:</p>
    <% @post.images.each do |image| %>
      <%= image_tag image, width: '300px' %>
    <% end %>
  <% end %>
  <p>
    <span class="fs-5 text-decoration-underline">Likes</span>:&nbsp;
    <%= @post.likes_count.zero? ? 'nobody :(' : pluralize(@post.likes_count, 'person') %>
  </p>

  <% if @current_user_post_like.nil? %> 
    <%= button_to 'Like', likes_path, params: { like: { post_id: @post.id }}, method: :post, class: 'btn btn-secondary' %>
  <% else %> 
    <%= button_to 'Unlike', like_path(@current_user_post_like), method: :delete, class: 'btn btn-dark' %>
  <% end %>

  <% if @post.author == current_user %>
    <h6 class="mt-3">Unhappy with this post?</h6>
    <%= button_to 'Delete post', post_path(@post), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: 'btn btn-sm btn-danger'  %> 
  <% end %>

  <h3 class="mt-3">Comments:</h3>
  <% if @post.comments.empty? %>
    <p class="text-muted fst-italic">This post doesn't have comments yet.</p>
    <p class="fst-italic">You can be the first!</p>
  <% else %>
    <div class="ms-3 col-10 col-sm-8"><%= render @post.comments %></div>
  <% end %>

  <%= render 'comments/form', post: @post %>
</div>